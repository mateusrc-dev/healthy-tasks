"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/avatar";
exports.ids = ["pages/api/avatar"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Favatar&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cavatar%5Cindex.api.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Favatar&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cavatar%5Cindex.api.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_avatar_index_api_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\avatar\\index.api.ts */ \"(api)/./src/pages/api/avatar/index.api.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_avatar_index_api_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_avatar_index_api_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/avatar\",\n        pathname: \"/api/avatar\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_avatar_index_api_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF2YXRhciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyU1Q3BhZ2VzJTVDYXBpJTVDYXZhdGFyJTVDaW5kZXguYXBpLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29FO0FBQ3BFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywrREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsK0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVhbHRoeS10YXNrcy8/N2JkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFxhdmF0YXJcXFxcaW5kZXguYXBpLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXZhdGFyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXZhdGFyXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Favatar&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cavatar%5Cindex.api.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/configs/auth.ts":
/*!*****************************!*\
  !*** ./src/configs/auth.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authObjectConfigs: () => (/* binding */ authObjectConfigs)\n/* harmony export */ });\nconst authObjectConfigs = {\n    jwt: {\n        secret: \"default\",\n        expiresIn: \"1d\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uZmlncy9hdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxvQkFBb0I7SUFDN0JDLEtBQUs7UUFDREMsUUFBUTtRQUNSQyxXQUFXO0lBQ2Y7QUFDSixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVhbHRoeS10YXNrcy8uL3NyYy9jb25maWdzL2F1dGgudHM/ZDc1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgYXV0aE9iamVjdENvbmZpZ3MgPSB7XHJcbiAgICBqd3Q6IHtcclxuICAgICAgICBzZWNyZXQ6IFwiZGVmYXVsdFwiLFxyXG4gICAgICAgIGV4cGlyZXNJbjogXCIxZFwiXHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiYXV0aE9iamVjdENvbmZpZ3MiLCJqd3QiLCJzZWNyZXQiLCJleHBpcmVzSW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/configs/auth.ts\n");

/***/ }),

/***/ "(api)/./src/configs/uploads.ts":
/*!********************************!*\
  !*** ./src/configs/uploads.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MULTER: () => (/* binding */ MULTER),\n/* harmony export */   TMP_FOLDER: () => (/* binding */ TMP_FOLDER),\n/* harmony export */   UPLOADS_FOLDER: () => (/* binding */ UPLOADS_FOLDER)\n/* harmony export */ });\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst TMP_FOLDER = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname, \"..\", \"..\", \"public\", \"tmp\"); //const vai guardar informações de configurações - por isso o nome da variável vai ser colocada em maiúsculo para diferenciar - \"..\" significa sair do diretório atual - dirname é para pegar a pasta atual - TMP_FOLDER é uma pasta temporária onde o arquivo chega\nconst UPLOADS_FOLDER = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(TMP_FOLDER, \"uploads\") //UPLOADS_FOLDER é a pasta onde os arquivos vão ficar \n;\nconst MULTER = {\n    storage: multer__WEBPACK_IMPORTED_MODULE_1___default().diskStorage({\n        destination: TMP_FOLDER,\n        filename (request, file, callback) {\n            const fileHash = crypto__WEBPACK_IMPORTED_MODULE_2___default().randomBytes(10).toString(\"hex\"); //crypto vai ser usado pra gerar um hash (um número) de forma aleatória pra evitar arquivos com nomes iguais - pra garantir que os usuários tenho arquivo com nome único - formatp hexadecimal\n            const fileName = `${fileHash}-${file.originalname}`; //evita que arquivos tenham nomes iguais - vai combinar o nome do arquivo com o hash criado aleatoriamente\n            return callback(null, fileName);\n        }\n    })\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uZmlncy91cGxvYWRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE0QjtBQUNEO0FBQ0E7QUFFcEIsTUFBTUcsYUFBYUgsd0RBQVksQ0FBQ0ssV0FBVyxNQUFNLE1BQU0sVUFBVSxPQUFPLENBQUMsb1FBQW9RO0FBRTdVLE1BQU1DLGlCQUFpQk4sd0RBQVksQ0FBQ0csWUFBWSxXQUFXLHNEQUFzRDtDQUF2RDtBQUUxRCxNQUFNSSxTQUFTO0lBQ3BCQyxTQUFTUCx5REFBa0IsQ0FBQztRQUMxQlMsYUFBYVA7UUFDYlEsVUFBU0MsT0FBTyxFQUFFQyxJQUFJLEVBQUVDLFFBQVE7WUFDOUIsTUFBTUMsV0FBV2IseURBQWtCLENBQUMsSUFBSWUsUUFBUSxDQUFDLFFBQVEsOExBQThMO1lBQ3ZQLE1BQU1DLFdBQVcsQ0FBQyxFQUFFSCxTQUFTLENBQUMsRUFBRUYsS0FBS00sWUFBWSxDQUFDLENBQUMsRUFBRSwwR0FBMEc7WUFDL0osT0FBT0wsU0FBUyxNQUFNSTtRQUN4QjtJQUNGO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hlYWx0aHktdGFza3MvLi9zcmMvY29uZmlncy91cGxvYWRzLnRzPzBjZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiXHJcbmltcG9ydCBtdWx0ZXIgZnJvbSBcIm11bHRlclwiXHJcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiXHJcblxyXG5leHBvcnQgY29uc3QgVE1QX0ZPTERFUiA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi5cIiwgXCIuLlwiLCBcInB1YmxpY1wiLCBcInRtcFwiKTsgLy9jb25zdCB2YWkgZ3VhcmRhciBpbmZvcm1hw6fDtWVzIGRlIGNvbmZpZ3VyYcOnw7VlcyAtIHBvciBpc3NvIG8gbm9tZSBkYSB2YXJpw6F2ZWwgdmFpIHNlciBjb2xvY2FkYSBlbSBtYWnDunNjdWxvIHBhcmEgZGlmZXJlbmNpYXIgLSBcIi4uXCIgc2lnbmlmaWNhIHNhaXIgZG8gZGlyZXTDs3JpbyBhdHVhbCAtIGRpcm5hbWUgw6kgcGFyYSBwZWdhciBhIHBhc3RhIGF0dWFsIC0gVE1QX0ZPTERFUiDDqSB1bWEgcGFzdGEgdGVtcG9yw6FyaWEgb25kZSBvIGFycXVpdm8gY2hlZ2FcclxuXHJcbmV4cG9ydCBjb25zdCBVUExPQURTX0ZPTERFUiA9IHBhdGgucmVzb2x2ZShUTVBfRk9MREVSLCBcInVwbG9hZHNcIikgLy9VUExPQURTX0ZPTERFUiDDqSBhIHBhc3RhIG9uZGUgb3MgYXJxdWl2b3MgdsOjbyBmaWNhciBcclxuXHJcbmV4cG9ydCBjb25zdCBNVUxURVIgPSB7IC8vY29uZmlndXJhw6fDtWVzIGRvIHVwbG9hZFxyXG4gIHN0b3JhZ2U6IG11bHRlci5kaXNrU3RvcmFnZSh7IC8vb2JqZXRvIGNvbSBjb25maWd1cmHDp8O1ZXNcclxuICAgIGRlc3RpbmF0aW9uOiBUTVBfRk9MREVSLCAvL2RpemVuZG8gcGFyYSBvbmRlIHZhaSBzZXIgZW52aWFkbyBvIGFycXVpdm8gKGEgZm90byBkbyB1c3XDoXJpbylcclxuICAgIGZpbGVuYW1lKHJlcXVlc3QsIGZpbGUsIGNhbGxiYWNrKXsgLy9ub21lIGRvIGFycXVpdm9cclxuICAgICAgY29uc3QgZmlsZUhhc2ggPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMTApLnRvU3RyaW5nKFwiaGV4XCIpOyAvL2NyeXB0byB2YWkgc2VyIHVzYWRvIHByYSBnZXJhciB1bSBoYXNoICh1bSBuw7ptZXJvKSBkZSBmb3JtYSBhbGVhdMOzcmlhIHByYSBldml0YXIgYXJxdWl2b3MgY29tIG5vbWVzIGlndWFpcyAtIHByYSBnYXJhbnRpciBxdWUgb3MgdXN1w6FyaW9zIHRlbmhvIGFycXVpdm8gY29tIG5vbWUgw7puaWNvIC0gZm9ybWF0cCBoZXhhZGVjaW1hbFxyXG4gICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2ZpbGVIYXNofS0ke2ZpbGUub3JpZ2luYWxuYW1lfWA7IC8vZXZpdGEgcXVlIGFycXVpdm9zIHRlbmhhbSBub21lcyBpZ3VhaXMgLSB2YWkgY29tYmluYXIgbyBub21lIGRvIGFycXVpdm8gY29tIG8gaGFzaCBjcmlhZG8gYWxlYXRvcmlhbWVudGVcclxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGZpbGVOYW1lKTsgXHJcbiAgICB9IFxyXG4gIH0pXHJcbn0iXSwibmFtZXMiOlsicGF0aCIsIm11bHRlciIsImNyeXB0byIsIlRNUF9GT0xERVIiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiVVBMT0FEU19GT0xERVIiLCJNVUxURVIiLCJzdG9yYWdlIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsImZpbGVuYW1lIiwicmVxdWVzdCIsImZpbGUiLCJjYWxsYmFjayIsImZpbGVIYXNoIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImZpbGVOYW1lIiwib3JpZ2luYWxuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/configs/uploads.ts\n");

/***/ }),

/***/ "(api)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\"\n    ]\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFdkMsTUFBTUMsU0FBUyxJQUFJRCx3REFBWUEsQ0FBQztJQUFFRSxLQUFLO1FBQUM7S0FBUTtBQUFDLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWFsdGh5LXRhc2tzLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KHsgbG9nOiBbJ3F1ZXJ5J10gfSkiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/avatar/index.api.ts":
/*!*******************************************!*\
  !*** ./src/pages/api/avatar/index.api.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _configs_uploads__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../configs/uploads */ \"(api)/./src/configs/uploads.ts\");\n/* harmony import */ var _middlewares_ensureAuthenticated__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/ensureAuthenticated */ \"(api)/./src/pages/api/middlewares/ensureAuthenticated.ts\");\n/* harmony import */ var _providers_DiskStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../providers/DiskStorage */ \"(api)/./src/providers/DiskStorage.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./src/lib/prisma.ts\");\n\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nconst handler = async (req, res)=>{\n    if (req.method !== \"PATCH\") {\n        return res.status(405).end();\n    }\n    await new Promise((resolve)=>{\n        // you may use any other multer function\n        const mw = multer__WEBPACK_IMPORTED_MODULE_0___default()(_configs_uploads__WEBPACK_IMPORTED_MODULE_1__.MULTER).single(\"avatar\");\n        //use resolve() instead of next()\n        mw(req, res, resolve);\n    });\n    const user_id = req.user_id;\n    const avatarFileName = req.file.filename;\n    const diskStorage = new _providers_DiskStorage__WEBPACK_IMPORTED_MODULE_3__.DiskStorage();\n    const user = _lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.findUnique({\n        where: {\n            id: user_id\n        }\n    });\n    if (!user) {\n        return res.status(401).json({\n            error: \"Usu\\xe1rio n\\xe3o existe.\"\n        });\n    }\n    if ((await user).photoUrl) {\n        await diskStorage.deleteFile((await user).photoUrl);\n    }\n    const filename = await diskStorage.saveFile(avatarFileName);\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.update({\n        where: {\n            id: user_id\n        },\n        data: {\n            photoUrl: filename\n        }\n    });\n    res.status(200).json({\n        filename: req.file.filename,\n        user_id: user_id\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middlewares_ensureAuthenticated__WEBPACK_IMPORTED_MODULE_2__.withAuth)(handler));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F2YXRhci9pbmRleC5hcGkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMkI7QUFDc0I7QUFDWTtBQUNEO0FBQ2hCO0FBRXJDLE1BQU1LLFNBQVM7SUFDcEJDLEtBQUs7UUFBRUMsWUFBWTtJQUFNO0FBQzNCLEVBQUM7QUFFRCxNQUFNQyxVQUFVLE9BQU9DLEtBQUtDO0lBQ3hCLElBQUlELElBQUlFLE1BQU0sS0FBSyxTQUFTO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxHQUFHO0lBQzlCO0lBRUEsTUFBTSxJQUFJQyxRQUFRQyxDQUFBQTtRQUNkLHdDQUF3QztRQUN4QyxNQUFNQyxLQUFLaEIsNkNBQU1BLENBQUNDLG9EQUFNQSxFQUFFZ0IsTUFBTSxDQUFDO1FBRWpDLGlDQUFpQztRQUNqQ0QsR0FBR1AsS0FBS0MsS0FBS0s7SUFDakI7SUFFQSxNQUFNRyxVQUFVVCxJQUFJUyxPQUFPO0lBQzNCLE1BQU1DLGlCQUFpQlYsSUFBSVcsSUFBSSxDQUFDQyxRQUFRO0lBQ3hDLE1BQU1DLGNBQWMsSUFBSW5CLCtEQUFXQTtJQUNuQyxNQUFNb0IsT0FBT25CLCtDQUFNQSxDQUFDbUIsSUFBSSxDQUFDQyxVQUFVLENBQUM7UUFBRUMsT0FBTztZQUFFQyxJQUFJUjtRQUFRO0lBQUM7SUFFNUQsSUFBSSxDQUFDSyxNQUFNO1FBQ1AsT0FBT2IsSUFBSUUsTUFBTSxDQUFDLEtBQUtlLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXNCO0lBQy9EO0lBRUEsSUFBSSxDQUFDLE1BQU1MLElBQUcsRUFBR00sUUFBUSxFQUFFO1FBQ3ZCLE1BQU1QLFlBQVlRLFVBQVUsQ0FBQyxDQUFDLE1BQU1QLElBQUcsRUFBR00sUUFBUTtJQUN0RDtJQUVBLE1BQU1SLFdBQVcsTUFBTUMsWUFBWVMsUUFBUSxDQUFDWjtJQUU1QyxNQUFNZiwrQ0FBTUEsQ0FBQ21CLElBQUksQ0FBQ1MsTUFBTSxDQUFDO1FBQUVQLE9BQU87WUFBRUMsSUFBSVI7UUFBUTtRQUFHZSxNQUFNO1lBQUVKLFVBQVVSO1FBQVM7SUFBQztJQUUvRVgsSUFBSUUsTUFBTSxDQUFDLEtBQUtlLElBQUksQ0FBQztRQUFFTixVQUFVWixJQUFJVyxJQUFJLENBQUNDLFFBQVE7UUFBRUgsU0FBU0E7SUFBUTtBQUN6RTtBQUVBLGlFQUFlaEIsMEVBQVFBLENBQUNNLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWFsdGh5LXRhc2tzLy4vc3JjL3BhZ2VzL2FwaS9hdmF0YXIvaW5kZXguYXBpLnRzPzVhMzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInXHJcbmltcG9ydCB7IE1VTFRFUiB9IGZyb20gJy4uLy4uLy4uL2NvbmZpZ3MvdXBsb2FkcydcclxuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICcuLi9taWRkbGV3YXJlcy9lbnN1cmVBdXRoZW50aWNhdGVkJ1xyXG5pbXBvcnQgeyBEaXNrU3RvcmFnZSB9IGZyb20gJy4uLy4uLy4uL3Byb3ZpZGVycy9EaXNrU3RvcmFnZSdcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi4vLi4vLi4vbGliL3ByaXNtYSdcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgYXBpOiB7IGJvZHlQYXJzZXI6IGZhbHNlIH1cclxufVxyXG5cclxuY29uc3QgaGFuZGxlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgaWYgKHJlcS5tZXRob2QgIT09ICdQQVRDSCcpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZCgpXHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgLy8geW91IG1heSB1c2UgYW55IG90aGVyIG11bHRlciBmdW5jdGlvblxyXG4gICAgICAgIGNvbnN0IG13ID0gbXVsdGVyKE1VTFRFUikuc2luZ2xlKFwiYXZhdGFyXCIpXHJcbiAgICBcclxuICAgICAgICAvL3VzZSByZXNvbHZlKCkgaW5zdGVhZCBvZiBuZXh0KClcclxuICAgICAgICBtdyhyZXEsIHJlcywgcmVzb2x2ZSlcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgdXNlcl9pZCA9IHJlcS51c2VyX2lkO1xyXG4gICAgY29uc3QgYXZhdGFyRmlsZU5hbWUgPSByZXEuZmlsZS5maWxlbmFtZVxyXG4gICAgY29uc3QgZGlza1N0b3JhZ2UgPSBuZXcgRGlza1N0b3JhZ2UoKVxyXG4gICAgY29uc3QgdXNlciA9IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlcl9pZCB9fSlcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VzdcOhcmlvIG7Do28gZXhpc3RlLicgfSk7XHJcbiAgICB9XHJcbiAgICAgIFxyXG4gICAgaWYgKChhd2FpdCB1c2VyKS5waG90b1VybCkge1xyXG4gICAgICAgIGF3YWl0IGRpc2tTdG9yYWdlLmRlbGV0ZUZpbGUoKGF3YWl0IHVzZXIpLnBob3RvVXJsKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVuYW1lID0gYXdhaXQgZGlza1N0b3JhZ2Uuc2F2ZUZpbGUoYXZhdGFyRmlsZU5hbWUpO1xyXG4gICAgICBcclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB1c2VyX2lkIH0sIGRhdGE6IHsgcGhvdG9Vcmw6IGZpbGVuYW1lIH19KVxyXG4gICAgICBcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZmlsZW5hbWU6IHJlcS5maWxlLmZpbGVuYW1lLCB1c2VyX2lkOiB1c2VyX2lkIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhBdXRoKGhhbmRsZXIpOyJdLCJuYW1lcyI6WyJtdWx0ZXIiLCJNVUxURVIiLCJ3aXRoQXV0aCIsIkRpc2tTdG9yYWdlIiwicHJpc21hIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm13Iiwic2luZ2xlIiwidXNlcl9pZCIsImF2YXRhckZpbGVOYW1lIiwiZmlsZSIsImZpbGVuYW1lIiwiZGlza1N0b3JhZ2UiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJqc29uIiwiZXJyb3IiLCJwaG90b1VybCIsImRlbGV0ZUZpbGUiLCJzYXZlRmlsZSIsInVwZGF0ZSIsImRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/avatar/index.api.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/middlewares/ensureAuthenticated.ts":
/*!**********************************************************!*\
  !*** ./src/pages/api/middlewares/ensureAuthenticated.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _configs_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../configs/auth */ \"(api)/./src/configs/auth.ts\");\n// middleware.ts\n\n\nconst withAuth = (handler)=>async (req, res)=>{\n        try {\n            // Obtém o token Bearer do cabeçalho\n            const authorizationHeader = req.headers.authorization || \"\";\n            const token = authorizationHeader.replace(\"Bearer \", \"\");\n            // Verifica se o token está presente\n            if (token.includes(\"Bearer\")) {\n                return res.status(401).json({\n                    error: \"Token n\\xe3o fornecido\"\n                });\n            }\n            try {\n                const { sub: user_id } = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.verify)(token, _configs_auth__WEBPACK_IMPORTED_MODULE_1__.authObjectConfigs.jwt.secret);\n                req.user_id = user_id;\n                return await handler(req, res);\n            } catch  {\n                return res.status(401).json({\n                    error: \"Token inv\\xe1lido\"\n                });\n            }\n        // Adicione qualquer lógica adicional de verificação aqui, por exemplo, validar o token\n        // Chama o manipulador original se o token estiver presente\n        } catch (error) {\n            console.error(\"Erro no middleware:\", error);\n            return res.status(500).json({\n                error: \"Erro interno do servidor\"\n            });\n        }\n    };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL21pZGRsZXdhcmVzL2Vuc3VyZUF1dGhlbnRpY2F0ZWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLGdCQUFnQjtBQUVzQjtBQUVvQjtBQU1uRCxNQUFNRSxXQUFXLENBQUNDLFVBQTRCLE9BQU9DLEtBQTJCQztRQUNyRixJQUFJO1lBQ0Ysb0NBQW9DO1lBQ3BDLE1BQU1DLHNCQUFzQkYsSUFBSUcsT0FBTyxDQUFDQyxhQUFhLElBQUk7WUFDekQsTUFBTUMsUUFBUUgsb0JBQW9CSSxPQUFPLENBQUMsV0FBVztZQUVyRCxvQ0FBb0M7WUFDcEMsSUFBSUQsTUFBTUUsUUFBUSxDQUFDLFdBQVc7Z0JBQzVCLE9BQU9OLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQXNCO1lBQzdEO1lBRUEsSUFBSTtnQkFDQSxNQUFNLEVBQUVDLEtBQUtDLE9BQU8sRUFBRSxHQUFHaEIsb0RBQU1BLENBQUNTLE9BQU9SLDREQUFpQkEsQ0FBQ2dCLEdBQUcsQ0FBQ0MsTUFBTTtnQkFFbkVkLElBQUlZLE9BQU8sR0FBR0E7Z0JBRWQsT0FBTyxNQUFNYixRQUFRQyxLQUFLQztZQUM5QixFQUFFLE9BQU07Z0JBQ0osT0FBT0EsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBaUI7WUFDMUQ7UUFFQSx1RkFBdUY7UUFFdkYsMkRBQTJEO1FBQzdELEVBQUUsT0FBT0EsT0FBTztZQUNkSyxRQUFRTCxLQUFLLENBQUMsdUJBQXVCQTtZQUNyQyxPQUFPVCxJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQTJCO1FBQ2xFO0lBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2hlYWx0aHktdGFza3MvLi9zcmMvcGFnZXMvYXBpL21pZGRsZXdhcmVzL2Vuc3VyZUF1dGhlbnRpY2F0ZWQudHM/YzZlZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtaWRkbGV3YXJlLnRzXHJcblxyXG5pbXBvcnQgeyB2ZXJpZnkgfSBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlLCBOZXh0QXBpSGFuZGxlciB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBhdXRoT2JqZWN0Q29uZmlncyB9IGZyb20gJy4uLy4uLy4uL2NvbmZpZ3MvYXV0aCc7XHJcblxyXG5pbnRlcmZhY2UgQXV0aGVudGljYXRlZFJlcXVlc3QgZXh0ZW5kcyBOZXh0QXBpUmVxdWVzdCB7XHJcbiAgICB1c2VyX2lkPzogc3RyaW5nO1xyXG4gIH1cclxuXHJcbmV4cG9ydCBjb25zdCB3aXRoQXV0aCA9IChoYW5kbGVyOiBOZXh0QXBpSGFuZGxlcikgPT4gYXN5bmMgKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIE9idMOpbSBvIHRva2VuIEJlYXJlciBkbyBjYWJlw6dhbGhvXHJcbiAgICBjb25zdCBhdXRob3JpemF0aW9uSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiB8fCAnJztcclxuICAgIGNvbnN0IHRva2VuID0gYXV0aG9yaXphdGlvbkhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xyXG5cclxuICAgIC8vIFZlcmlmaWNhIHNlIG8gdG9rZW4gZXN0w6EgcHJlc2VudGVcclxuICAgIGlmICh0b2tlbi5pbmNsdWRlcyhcIkJlYXJlclwiKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1Rva2VuIG7Do28gZm9ybmVjaWRvJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHsgc3ViOiB1c2VyX2lkIH0gPSB2ZXJpZnkodG9rZW4sIGF1dGhPYmplY3RDb25maWdzLmp3dC5zZWNyZXQpIGFzIHsgc3ViOiBzdHJpbmcgfTtcclxuICAgICAgICBcclxuICAgICAgICByZXEudXNlcl9pZCA9IHVzZXJfaWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdUb2tlbiBpbnbDoWxpZG8nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkaWNpb25lIHF1YWxxdWVyIGzDs2dpY2EgYWRpY2lvbmFsIGRlIHZlcmlmaWNhw6fDo28gYXF1aSwgcG9yIGV4ZW1wbG8sIHZhbGlkYXIgbyB0b2tlblxyXG5cclxuICAgIC8vIENoYW1hIG8gbWFuaXB1bGFkb3Igb3JpZ2luYWwgc2UgbyB0b2tlbiBlc3RpdmVyIHByZXNlbnRlXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gbm8gbWlkZGxld2FyZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm8gaW50ZXJubyBkbyBzZXJ2aWRvcicgfSk7XHJcbiAgfVxyXG59OyJdLCJuYW1lcyI6WyJ2ZXJpZnkiLCJhdXRoT2JqZWN0Q29uZmlncyIsIndpdGhBdXRoIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImF1dGhvcml6YXRpb25IZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRva2VuIiwicmVwbGFjZSIsImluY2x1ZGVzIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwic3ViIiwidXNlcl9pZCIsImp3dCIsInNlY3JldCIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/middlewares/ensureAuthenticated.ts\n");

/***/ }),

/***/ "(api)/./src/providers/DiskStorage.ts":
/*!**************************************!*\
  !*** ./src/providers/DiskStorage.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DiskStorage: () => (/* binding */ DiskStorage)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _configs_uploads__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../configs/uploads */ \"(api)/./src/configs/uploads.ts\");\n\n\n\nclass DiskStorage {\n    async saveFile(file) {\n        await fs__WEBPACK_IMPORTED_MODULE_0___default().promises.rename(path__WEBPACK_IMPORTED_MODULE_1___default().resolve(_configs_uploads__WEBPACK_IMPORTED_MODULE_2__.TMP_FOLDER, file), path__WEBPACK_IMPORTED_MODULE_1___default().resolve(_configs_uploads__WEBPACK_IMPORTED_MODULE_2__.UPLOADS_FOLDER, file) //levando o arquivo para a nova pasta para salvar o arquivo (lugar onde o arquivo realmente vai ficar)\n        );\n        return file;\n    }\n    async deleteFile(file) {\n        const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().resolve(_configs_uploads__WEBPACK_IMPORTED_MODULE_2__.UPLOADS_FOLDER, file) //pegando o arquivo que já está salvo \n        ;\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_0___default().promises.stat(filePath); //conferindo se o filePath existe\n        } catch  {\n            return;\n        }\n        await fs__WEBPACK_IMPORTED_MODULE_0___default().promises.unlink(filePath) //função para deletar um arquivo\n        ;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcHJvdmlkZXJzL0Rpc2tTdG9yYWdlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFtQjtBQUNJO0FBQ3NDO0FBRXRELE1BQU1JO0lBQ1QsTUFBTUMsU0FBU0MsSUFBSSxFQUFDO1FBQ2xCLE1BQU1OLGtEQUFXLENBQUNRLE1BQU0sQ0FDdEJQLG1EQUFZLENBQUNDLHdEQUFVQSxFQUFFSSxPQUN6QkwsbURBQVksQ0FBQ0UsNERBQWNBLEVBQUVHLE1BQU0sc0dBQXNHOztRQUUzSSxPQUFPQTtJQUNUO0lBRUEsTUFBTUksV0FBV0osSUFBSSxFQUFFO1FBQ3JCLE1BQU1LLFdBQVdWLG1EQUFZLENBQUNFLDREQUFjQSxFQUFFRyxNQUFNLHNDQUFzQzs7UUFDMUYsSUFBSTtZQUNGLE1BQU1OLGtEQUFXLENBQUNZLElBQUksQ0FBQ0QsV0FBVyxpQ0FBaUM7UUFDckUsRUFBRSxPQUFNO1lBQ047UUFDRjtRQUNBLE1BQU1YLGtEQUFXLENBQUNhLE1BQU0sQ0FBQ0YsVUFBVSxnQ0FBZ0M7O0lBQ3JFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWFsdGh5LXRhc2tzLy4vc3JjL3Byb3ZpZGVycy9EaXNrU3RvcmFnZS50cz9iNjU0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwiZnNcIlxyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiXHJcbmltcG9ydCB7VE1QX0ZPTERFUiwgVVBMT0FEU19GT0xERVJ9IGZyb20gXCIuLi9jb25maWdzL3VwbG9hZHNcIlxyXG5cclxuZXhwb3J0IGNsYXNzIERpc2tTdG9yYWdlIHtcclxuICAgIGFzeW5jIHNhdmVGaWxlKGZpbGUpeyBcclxuICAgICAgYXdhaXQgZnMucHJvbWlzZXMucmVuYW1lKCAvL211ZGFuZG8gbyBhcnF1aXZvIGRlIGx1Z2FyXHJcbiAgICAgICAgcGF0aC5yZXNvbHZlKFRNUF9GT0xERVIsIGZpbGUpLCAvL3BlZ2FuZG8gbyBhcnF1aXZvIGRhIHBhc3RhIGF0dWFsIChsdWdhciBvbmRlIGEgcGFzdGEgZmljYSBxdWFuZG8gY2hlZ2EpXHJcbiAgICAgICAgcGF0aC5yZXNvbHZlKFVQTE9BRFNfRk9MREVSLCBmaWxlKSAvL2xldmFuZG8gbyBhcnF1aXZvIHBhcmEgYSBub3ZhIHBhc3RhIHBhcmEgc2FsdmFyIG8gYXJxdWl2byAobHVnYXIgb25kZSBvIGFycXVpdm8gcmVhbG1lbnRlIHZhaSBmaWNhcilcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gZmlsZTtcclxuICAgIH1cclxuICBcclxuICAgIGFzeW5jIGRlbGV0ZUZpbGUoZmlsZSkge1xyXG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShVUExPQURTX0ZPTERFUiwgZmlsZSkgLy9wZWdhbmRvIG8gYXJxdWl2byBxdWUgasOhIGVzdMOhIHNhbHZvIFxyXG4gICAgICB0cnkgeyAvL3F1YW5kbyBzZSB0cmFiYWxoYSBjb20gbWFuaXB1bGHDp8OjbyBkZSBhcnF1aXZvcyDDqSBzZW1wcmUgYm9tIHVzYXIgZXhjZcOnw7VlcyBwcmEgZXZpdGFyIHBhcmFyIGEgYXBsaWNhw6fDo28gZGV2aWRvIHVtIGVycm8gcG9yIG8gYXJxdWl2byBuw6NvIGV4aXN0aXIgbWFpc1xyXG4gICAgICAgIGF3YWl0IGZzLnByb21pc2VzLnN0YXQoZmlsZVBhdGgpOyAvL2NvbmZlcmluZG8gc2UgbyBmaWxlUGF0aCBleGlzdGVcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IGZzLnByb21pc2VzLnVubGluayhmaWxlUGF0aCkgLy9mdW7Dp8OjbyBwYXJhIGRlbGV0YXIgdW0gYXJxdWl2b1xyXG4gICAgfVxyXG4gIH0iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiVE1QX0ZPTERFUiIsIlVQTE9BRFNfRk9MREVSIiwiRGlza1N0b3JhZ2UiLCJzYXZlRmlsZSIsImZpbGUiLCJwcm9taXNlcyIsInJlbmFtZSIsInJlc29sdmUiLCJkZWxldGVGaWxlIiwiZmlsZVBhdGgiLCJzdGF0IiwidW5saW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/providers/DiskStorage.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Favatar&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cavatar%5Cindex.api.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();